<html>
  <!-- START CSS -->
  <style>
    .node {
      pointer-events: none;
    }

    .node circle {
      stroke: darkgray;
      fill: lightgray;
    }

    .edgePath path.path {
      stroke: #333;
      fill: none;
      stroke-width: 1.5px;
    }
  </style>
  <!-- END CSS -->
  <!-- LIB DEPS -->
  <script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.min.js"></script>

  <!-- ALL INPUT FIELDS CSS -->
  <body>
    <form>
      Source:<br />
      <input type="text" name="firstname" /><br />
      Destination: <br />
      <input type="text" name="lastname" />
    </form>
    <div id="option">
      <input
        name="updateButton"
        type="button"
        value="Update"
        onclick="updateData()"
      />
    </div>
    <svg width="960" height="600"></svg>
  </body>

  <!-- BEGIN JS -->
  <script>
    // Display options
    var options = {
      rankdir: "LR"
    };

    // Create the input graph
    var g = new dagreD3.graphlib.Graph()
      .setGraph(options)
      .setDefaultEdgeLabel(function() {
        return {};
      });

    // Set nodes
    var n_nodes = 8;
    for (var i = 0; i < n_nodes; i++) {
      g.setNode(i, {
        label: i
      });
    }

    g.nodes().forEach(function(v) {
      var node = g.node(v);
      node.shape = "circle";
    });

    // Set edges
    g.setEdge(0, 1, { arrowhead: "undirected" });
    g.setEdge(1, 2, { arrowhead: "undirected" });
    g.setEdge(2, 3, { arrowhead: "undirected" });
    g.setEdge(3, 4, { arrowhead: "undirected" });
    g.setEdge(4, 5, { arrowhead: "undirected" });
    g.setEdge(1, 1, { arrowhead: "undirected" });
    g.setEdge(1, 6, { arrowhead: "undirected" });
    g.setEdge(6, 7, { arrowhead: "undirected" });
    g.setEdge(7, 0, { label: "something else", arrowhead: "undirected" });
    g.setEdge(7, 4, { label: "4", arrowhead: "undirected" });

    // Create the renderer
    var render = new dagreD3.render();

    // Set up an SVG group so that we can translate the final graph.
    var svg = d3.select("svg");
    // Run the renderer. This is what draws the final graph.
    render(svg, g);

    /**
     * HELPER FUNCTIONS
     *
     **/
    function updateData() {
      g.node(1).style = "fill: #f77";
      g.setEdge(1, 2, { label: "fuck" });
      console.log(g.isDirected());
      g.edge(1, 2).style =
        "stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;";
      render(svg, g);
    }
  </script>
</html>
